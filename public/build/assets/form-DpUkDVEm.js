import{c as Ie,a as Oe,r as Me,j as t,H as Be,L as Ge}from"./app-B0TNbMn-.js";import{I as z}from"./input-error-Cq0GhrnN.js";import{B as Te}from"./button-Q1pc-W3u.js";import{b as He,c as qe,C as We,a as ze}from"./card-CdwOYdk-.js";import{L as J}from"./label-DMQF09vG.js";import{T as Je}from"./toast-CWePUTWw.js";import{A as Ke}from"./app-layout-DlMjznvm.js";/* empty css            */import"./utils-DwDq1e9d.js";import"./index-BvRwfgcE.js";import"./check-CBc63dse.js";import"./x-QvDVFrHJ.js";import"./transition-CLt8Y9_o.js";import"./index-1zbHqn2d.js";import"./index-Bk3c-dX8.js";import"./megaphone-BfoPj57M.js";import"./hard-hat-CF3rDnIU.js";import"./phone-DYfDZZ8f.js";import"./users-DVYRslCj.js";import"./landmark-CB_KGvE1.js";const Qe="/dashboard",K="/dashboard/activities",Ve="border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 min-h-[200px] w-full rounded-lg border bg-transparent px-3 py-2.5 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:opacity-50 md:text-sm resize-y";function xt(De){const e=Ie.c(140),{activity:r}=De,o=r!=null;let V,X;e[0]===Symbol.for("react.memo_cache_sentinel")?(V={title:"Dashboard",href:Qe},X={title:"Municipality Activities",href:K},e[0]=V,e[1]=X):(V=e[0],X=e[1]);const _e=o?"Edit activity":"New activity",ve=o?`${K}/${r.id}/edit`:`${K}/create`;let Y;e[2]!==_e||e[3]!==ve?(Y=[V,X,{title:_e,href:ve}],e[2]=_e,e[3]=ve,e[4]=Y):Y=e[4];const je=Y,ye=r?.title??"",Ne=r?.content??"",we=r?.link_url??"";let Z;e[5]===Symbol.for("react.memo_cache_sentinel")?(Z=[],e[5]=Z):Z=e[5];let ee;e[6]===Symbol.for("react.memo_cache_sentinel")?(ee=[],e[6]=ee):ee=e[6];const Se=r?.published_at??"";let te;e[7]!==Se||e[8]!==ye||e[9]!==Ne||e[10]!==we?(te={title:ye,content:Ne,link_url:we,image:null,remove_image:!1,other_images:Z,remove_other_images:ee,published_at:Se},e[7]=Se,e[8]=ye,e[9]=Ne,e[10]=we,e[11]=te):te=e[11];const{data:s,setData:i,post:ke,put:Ce,processing:se,errors:a}=Oe(te),[Le,Ae]=Me.useState(!1),Q=r?.image_url??null;let ie;e[12]!==s.image?(ie=s.image?URL.createObjectURL(s.image):null,e[12]=s.image,e[13]=ie):ie=e[13];const m=ie;let le,ae;e[14]!==m?(le=()=>()=>{m&&URL.revokeObjectURL(m)},ae=[m],e[14]=m,e[15]=le,e[16]=ae):(le=e[15],ae=e[16]),Me.useEffect(le,ae);let re;e[17]!==r||e[18]!==o||e[19]!==ke||e[20]!==Ce?(re=l=>{l.preventDefault();const n={onSuccess:()=>Ae(!0),forceFormData:!0};o&&r?.id?Ce(`${K}/${r.id}`,n):ke(K,n)},e[17]=r,e[18]=o,e[19]=ke,e[20]=Ce,e[21]=re):re=e[21];const Ue=re,Re=o?"Edit activity":"New activity";let c;e[22]!==Re?(c=t.jsx(Be,{title:Re}),e[22]=Re,e[23]=c):c=e[23];const Ee=o?"Edit activity":"New activity";let d;e[24]!==Ee?(d=t.jsx("h1",{className:"text-xl font-semibold tracking-tight md:text-2xl",children:Ee}),e[24]=Ee,e[25]=d):d=e[25];const Fe=o?"Update this activity post.":"Add a municipality activity. It will appear on the homepage and at /activities.";let f;e[26]!==Fe?(f=t.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:Fe}),e[26]=Fe,e[27]=f):f=e[27];let u;e[28]!==d||e[29]!==f?(u=t.jsxs("header",{children:[d,f]}),e[28]=d,e[29]=f,e[30]=u):u=e[30];let oe;e[31]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx(He,{children:t.jsx(qe,{className:"text-base",children:"Details"})}),e[31]=oe):oe=e[31];let ne;e[32]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx(J,{htmlFor:"title",children:"Title"}),e[32]=ne):ne=e[32];let p;e[33]!==i?(p=l=>i("title",l.target.value),e[33]=i,e[34]=p):p=e[34];let h;e[35]!==s.title||e[36]!==p?(h=t.jsx("input",{id:"title",type:"text",value:s.title,onChange:p,className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-xs outline-none focus-visible:ring-[3px] focus-visible:ring-ring/50 md:text-sm",placeholder:"e.g. LGU leads relief distribution",required:!0}),e[35]=s.title,e[36]=p,e[37]=h):h=e[37];let g;e[38]!==a.title?(g=t.jsx(z,{message:a.title}),e[38]=a.title,e[39]=g):g=e[39];let x;e[40]!==h||e[41]!==g?(x=t.jsxs("div",{className:"space-y-2",children:[ne,h,g]}),e[40]=h,e[41]=g,e[42]=x):x=e[42];let me;e[43]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(J,{htmlFor:"link_url",children:"Link to source (optional)"}),e[43]=me):me=e[43];let b;e[44]!==i?(b=l=>i("link_url",l.target.value),e[44]=i,e[45]=b):b=e[45];let _;e[46]!==s.link_url||e[47]!==b?(_=t.jsx("input",{id:"link_url",type:"url",value:s.link_url,onChange:b,className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-xs outline-none focus-visible:ring-[3px] focus-visible:ring-ring/50 md:text-sm",placeholder:"https://..."}),e[46]=s.link_url,e[47]=b,e[48]=_):_=e[48];let v;e[49]!==a.link_url?(v=t.jsx(z,{message:a.link_url}),e[49]=a.link_url,e[50]=v):v=e[50];let j;e[51]!==_||e[52]!==v?(j=t.jsxs("div",{className:"space-y-2",children:[me,_,v]}),e[51]=_,e[52]=v,e[53]=j):j=e[53];let ce;e[54]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx(J,{htmlFor:"image",children:"Picture (optional)"}),e[54]=ce):ce=e[54];let y;e[55]!==i?(y=t.jsx("input",{id:"image",type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:l=>i("image",l.target.files?.[0]??null),className:"w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-xs outline-none file:mr-2 file:rounded-md file:border-0 file:bg-muted file:px-3 file:py-1 file:text-sm file:font-medium focus-visible:ring-[3px] focus-visible:ring-ring/50 md:text-sm"}),e[55]=i,e[56]=y):y=e[56];let de;e[57]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx("p",{className:"text-xs text-muted-foreground",children:"JPEG, PNG, GIF or WebP. Max 5 MB."}),e[57]=de):de=e[57];let N;e[58]!==Q||e[59]!==s.image||e[60]!==s.remove_image||e[61]!==o||e[62]!==m||e[63]!==i?(N=(Q||m)&&t.jsxs("div",{className:"flex flex-wrap items-start gap-3 pt-1",children:[t.jsx("img",{src:m??Q??"",alt:"",className:"h-24 w-auto rounded-md border border-slate-200 object-cover"}),o&&Q&&!s.image&&t.jsxs("label",{className:"flex cursor-pointer items-center gap-2 text-sm text-muted-foreground",children:[t.jsx("input",{type:"checkbox",checked:s.remove_image,onChange:l=>i("remove_image",l.target.checked),className:"rounded border-slate-300"}),"Remove picture"]})]}),e[58]=Q,e[59]=s.image,e[60]=s.remove_image,e[61]=o,e[62]=m,e[63]=i,e[64]=N):N=e[64];let w;e[65]!==a.image?(w=t.jsx(z,{message:a.image}),e[65]=a.image,e[66]=w):w=e[66];let S;e[67]!==y||e[68]!==N||e[69]!==w?(S=t.jsxs("div",{className:"space-y-2",children:[ce,y,de,N,w]}),e[67]=y,e[68]=N,e[69]=w,e[70]=S):S=e[70];let fe;e[71]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx(J,{htmlFor:"other_images",children:"Other Pictures (optional)"}),e[71]=fe):fe=e[71];let k;e[72]!==s.other_images||e[73]!==i?(k=t.jsx("input",{id:"other_images",type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",multiple:!0,onChange:l=>{const n=l.target.files;n&&i("other_images",[...s.other_images,...Array.from(n)]),l.target.value=""},className:"w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-xs outline-none file:mr-2 file:rounded-md file:border-0 file:bg-muted file:px-3 file:py-1 file:text-sm file:font-medium focus-visible:ring-[3px] focus-visible:ring-ring/50 md:text-sm"}),e[72]=s.other_images,e[73]=i,e[74]=k):k=e[74];let ue;e[75]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Select multiple images. Max 10 images, 5 MB each."}),e[75]=ue):ue=e[75];let C;e[76]!==r||e[77]!==s.remove_other_images||e[78]!==i?(C=r?.other_images_urls&&r.other_images_urls.length>0&&t.jsxs("div",{className:"space-y-2 pt-1",children:[t.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Existing images:"}),t.jsx("div",{className:"flex flex-wrap gap-3",children:r.other_images_urls.map((l,n)=>{const W=s.remove_other_images.includes(n);return t.jsxs("div",{className:"group relative",children:[t.jsx("img",{src:l,alt:"",className:`h-20 w-20 rounded-md border border-slate-200 object-cover transition-opacity ${W?"opacity-40":""}`}),t.jsx("button",{type:"button",onClick:()=>{W?i("remove_other_images",s.remove_other_images.filter(Pe=>Pe!==n)):i("remove_other_images",[...s.remove_other_images,n])},className:`absolute -top-1.5 -right-1.5 flex h-5 w-5 items-center justify-center rounded-full text-xs font-bold shadow-sm transition-colors ${W?"bg-green-500 text-white hover:bg-green-600":"bg-red-500 text-white hover:bg-red-600"}`,title:W?"Undo removal":"Remove image",children:W?"↺":"×"})]},l)})})]}),e[76]=r,e[77]=s.remove_other_images,e[78]=i,e[79]=C):C=e[79];let L;e[80]!==s.other_images||e[81]!==i?(L=s.other_images.length>0&&t.jsxs("div",{className:"space-y-2 pt-1",children:[t.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"New images to upload:"}),t.jsx("div",{className:"flex flex-wrap gap-3",children:s.other_images.map((l,n)=>t.jsxs("div",{className:"group relative",children:[t.jsx("img",{src:URL.createObjectURL(l),alt:"",className:"h-20 w-20 rounded-md border border-slate-200 object-cover"}),t.jsx("button",{type:"button",onClick:()=>{i("other_images",s.other_images.filter((W,Pe)=>Pe!==n))},className:"absolute -top-1.5 -right-1.5 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white shadow-sm hover:bg-red-600",title:"Remove",children:"×"})]},`${l.name}-${n}`))})]}),e[80]=s.other_images,e[81]=i,e[82]=L):L=e[82];let U;e[83]!==a.other_images?(U=t.jsx(z,{message:a.other_images}),e[83]=a.other_images,e[84]=U):U=e[84];let R;e[85]!==k||e[86]!==C||e[87]!==L||e[88]!==U?(R=t.jsxs("div",{className:"space-y-2",children:[fe,k,ue,C,L,U]}),e[85]=k,e[86]=C,e[87]=L,e[88]=U,e[89]=R):R=e[89];let pe;e[90]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx(J,{htmlFor:"published_at",children:"Publish date & time (optional)"}),e[90]=pe):pe=e[90];let E;e[91]!==i?(E=l=>i("published_at",l.target.value),e[91]=i,e[92]=E):E=e[92];let F;e[93]!==s.published_at||e[94]!==E?(F=t.jsx("input",{id:"published_at",type:"datetime-local",value:s.published_at,onChange:E,className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-xs outline-none focus-visible:ring-[3px] focus-visible:ring-ring/50 md:text-sm"}),e[93]=s.published_at,e[94]=E,e[95]=F):F=e[95];let he;e[96]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Leave empty to publish immediately."}),e[96]=he):he=e[96];let $;e[97]!==a.published_at?($=t.jsx(z,{message:a.published_at}),e[97]=a.published_at,e[98]=$):$=e[98];let P;e[99]!==F||e[100]!==$?(P=t.jsxs("div",{className:"space-y-2",children:[pe,F,he,$]}),e[99]=F,e[100]=$,e[101]=P):P=e[101];let ge;e[102]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx(J,{htmlFor:"content",children:"Content"}),e[102]=ge):ge=e[102];let A;e[103]!==i?(A=l=>i("content",l.target.value),e[103]=i,e[104]=A):A=e[104];let M;e[105]!==s.content||e[106]!==A?(M=t.jsx("textarea",{id:"content",value:s.content,onChange:A,className:Ve,placeholder:"Write the activity summary...",required:!0}),e[105]=s.content,e[106]=A,e[107]=M):M=e[107];let T;e[108]!==a.content?(T=t.jsx(z,{message:a.content}),e[108]=a.content,e[109]=T):T=e[109];let D;e[110]!==M||e[111]!==T?(D=t.jsxs("div",{className:"space-y-2",children:[ge,M,T]}),e[110]=M,e[111]=T,e[112]=D):D=e[112];let I;e[113]!==x||e[114]!==j||e[115]!==S||e[116]!==R||e[117]!==P||e[118]!==D?(I=t.jsxs(We,{children:[oe,t.jsxs(ze,{className:"space-y-4",children:[x,j,S,R,P,D]})]}),e[113]=x,e[114]=j,e[115]=S,e[116]=R,e[117]=P,e[118]=D,e[119]=I):I=e[119];const $e=se?"Saving...":o?"Save changes":"Publish activity";let O;e[120]!==se||e[121]!==$e?(O=t.jsx(Te,{type:"submit",disabled:se,children:$e}),e[120]=se,e[121]=$e,e[122]=O):O=e[122];let xe;e[123]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx(Te,{type:"button",variant:"outline",asChild:!0,children:t.jsx(Ge,{href:K,children:"Cancel"})}),e[123]=xe):xe=e[123];let B;e[124]!==O?(B=t.jsxs("div",{className:"flex flex-wrap gap-3",children:[O,xe]}),e[124]=O,e[125]=B):B=e[125];let G;e[126]!==Ue||e[127]!==I||e[128]!==B?(G=t.jsxs("form",{onSubmit:Ue,className:"space-y-6",children:[I,B]}),e[126]=Ue,e[127]=I,e[128]=B,e[129]=G):G=e[129];let H;e[130]!==u||e[131]!==G?(H=t.jsxs("div",{className:"flex flex-1 flex-col gap-6 overflow-x-auto px-4 py-6 md:px-6 lg:max-w-2xl",children:[u,G]}),e[130]=u,e[131]=G,e[132]=H):H=e[132];let q;e[133]!==Le?(q=t.jsx(Je,{open:Le,onOpenChange:Ae,title:"Saved"}),e[133]=Le,e[134]=q):q=e[134];let be;return e[135]!==je||e[136]!==c||e[137]!==H||e[138]!==q?(be=t.jsxs(Ke,{breadcrumbs:je,children:[c,H,q]}),e[135]=je,e[136]=c,e[137]=H,e[138]=q,e[139]=be):be=e[139],be}export{xt as default};
