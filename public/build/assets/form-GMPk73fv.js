import{c as tt,a as st,r as Ye,j as t,H as it,L as lt}from"./app-B0TNbMn-.js";import{I as d}from"./input-error-Cq0GhrnN.js";import{B as Ze}from"./button-Q1pc-W3u.js";import{b as rt,c as ot,C as at,a as nt}from"./card-CdwOYdk-.js";import{L as p}from"./label-DMQF09vG.js";import{T as mt}from"./toast-CWePUTWw.js";import{A as ct}from"./app-layout-DlMjznvm.js";/* empty css            */import"./utils-DwDq1e9d.js";import"./index-BvRwfgcE.js";import"./check-CBc63dse.js";import"./x-QvDVFrHJ.js";import"./transition-CLt8Y9_o.js";import"./index-1zbHqn2d.js";import"./index-Bk3c-dX8.js";import"./megaphone-BfoPj57M.js";import"./hard-hat-CF3rDnIU.js";import"./phone-DYfDZZ8f.js";import"./users-DVYRslCj.js";import"./landmark-CB_KGvE1.js";const dt="/dashboard",ie="/dashboard/projects",pt="border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 min-h-[200px] w-full rounded-lg border bg-transparent px-3 py-2.5 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:opacity-50 md:text-sm resize-y",ut="flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-xs outline-none focus-visible:ring-[3px] focus-visible:ring-ring/50 md:text-sm";function Et(et){const e=tt.c(177),{project:o}=et,a=o!=null;let ae,ne;e[0]===Symbol.for("react.memo_cache_sentinel")?(ae={title:"Dashboard",href:dt},ne={title:"Municipal Projects",href:ie},e[0]=ae,e[1]=ne):(ae=e[0],ne=e[1]);const Ie=a?"Edit project":"New project",Oe=a?`${ie}/${o.id}/edit`:`${ie}/create`;let me;e[2]!==Ie||e[3]!==Oe?(me=[ae,ne,{title:Ie,href:Oe}],e[2]=Ie,e[3]=Oe,e[4]=me):me=e[4];const Te=me,De=o?.title??"",Ae=o?.description??"",Be=o?.status??"ongoing",qe=o?.link_url??"";let ce;e[5]===Symbol.for("react.memo_cache_sentinel")?(ce=[],e[5]=ce):ce=e[5];let de;e[6]===Symbol.for("react.memo_cache_sentinel")?(de=[],e[6]=de):de=e[6];const Ve=o?.published_at??"";let pe;e[7]!==Ve||e[8]!==De||e[9]!==Ae||e[10]!==Be||e[11]!==qe?(pe={title:De,description:Ae,status:Be,link_url:qe,image:null,remove_image:!1,video:null,remove_video:!1,other_images:ce,remove_other_images:de,published_at:Ve},e[7]=Ve,e[8]=De,e[9]=Ae,e[10]=Be,e[11]=qe,e[12]=pe):pe=e[12];const{data:s,setData:i,post:ue,processing:fe,errors:r}=st(pe),[Ge,Xe]=Ye.useState(!1),le=o?.image_url??null,re=o?.video_url??null;let he;e[13]!==s.image?(he=s.image?URL.createObjectURL(s.image):null,e[13]=s.image,e[14]=he):he=e[14];const m=he;let xe;e[15]!==s.video?(xe=s.video?URL.createObjectURL(s.video):null,e[15]=s.video,e[16]=xe):xe=e[16];const c=xe;let ge,be;e[17]!==m||e[18]!==c?(ge=()=>()=>{m&&URL.revokeObjectURL(m),c&&URL.revokeObjectURL(c)},be=[m,c],e[17]=m,e[18]=c,e[19]=ge,e[20]=be):(ge=e[19],be=e[20]),Ye.useEffect(ge,be);let ve;e[21]!==s||e[22]!==a||e[23]!==ue||e[24]!==o?(ve=l=>{l.preventDefault();const n={onSuccess:()=>Xe(!0),forceFormData:!0};a&&o?.id?ue(`${ie}/${o.id}`,{...n,data:{...s,_method:"PUT"}}):ue(ie,n)},e[21]=s,e[22]=a,e[23]=ue,e[24]=o,e[25]=ve):ve=e[25];const He=ve,We=a?"Edit project":"New project";let u;e[26]!==We?(u=t.jsx(it,{title:We}),e[26]=We,e[27]=u):u=e[27];const ze=a?"Edit project":"New project";let f;e[28]!==ze?(f=t.jsx("h1",{className:"text-xl font-semibold tracking-tight md:text-2xl",children:ze}),e[28]=ze,e[29]=f):f=e[29];const Je=a?"Update this project.":"Add a municipal project. It will appear on the homepage.";let h;e[30]!==Je?(h=t.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:Je}),e[30]=Je,e[31]=h):h=e[31];let x;e[32]!==f||e[33]!==h?(x=t.jsxs("header",{children:[f,h]}),e[32]=f,e[33]=h,e[34]=x):x=e[34];let _e;e[35]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsx(rt,{children:t.jsx(ot,{className:"text-base",children:"Details"})}),e[35]=_e):_e=e[35];let je;e[36]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx(p,{htmlFor:"title",children:"Title"}),e[36]=je):je=e[36];let g;e[37]!==i?(g=l=>i("title",l.target.value),e[37]=i,e[38]=g):g=e[38];let b;e[39]!==s.title||e[40]!==g?(b=t.jsx("input",{id:"title",type:"text",value:s.title,onChange:g,className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-xs outline-none focus-visible:ring-[3px] focus-visible:ring-ring/50 md:text-sm",placeholder:"e.g. Construction of New Market",required:!0}),e[39]=s.title,e[40]=g,e[41]=b):b=e[41];let v;e[42]!==r.title?(v=t.jsx(d,{message:r.title}),e[42]=r.title,e[43]=v):v=e[43];let _;e[44]!==b||e[45]!==v?(_=t.jsxs("div",{className:"space-y-2",children:[je,b,v]}),e[44]=b,e[45]=v,e[46]=_):_=e[46];let ye;e[47]===Symbol.for("react.memo_cache_sentinel")?(ye=t.jsx(p,{htmlFor:"status",children:"Status"}),e[47]=ye):ye=e[47];let j;e[48]!==i?(j=l=>i("status",l.target.value),e[48]=i,e[49]=j):j=e[49];let Ne,we;e[50]===Symbol.for("react.memo_cache_sentinel")?(Ne=t.jsx("option",{value:"ongoing",children:"Ongoing"}),we=t.jsx("option",{value:"completed",children:"Completed"}),e[50]=Ne,e[51]=we):(Ne=e[50],we=e[51]);let y;e[52]!==s.status||e[53]!==j?(y=t.jsxs("select",{id:"status",value:s.status,onChange:j,className:ut,required:!0,children:[Ne,we]}),e[52]=s.status,e[53]=j,e[54]=y):y=e[54];let N;e[55]!==r.status?(N=t.jsx(d,{message:r.status}),e[55]=r.status,e[56]=N):N=e[56];let w;e[57]!==y||e[58]!==N?(w=t.jsxs("div",{className:"space-y-2",children:[ye,y,N]}),e[57]=y,e[58]=N,e[59]=w):w=e[59];let ke;e[60]===Symbol.for("react.memo_cache_sentinel")?(ke=t.jsx(p,{htmlFor:"published_at",children:"Publish date & time (optional)"}),e[60]=ke):ke=e[60];let k;e[61]!==i?(k=l=>i("published_at",l.target.value),e[61]=i,e[62]=k):k=e[62];let S;e[63]!==s.published_at||e[64]!==k?(S=t.jsx("input",{id:"published_at",type:"datetime-local",value:s.published_at,onChange:k,className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-xs outline-none focus-visible:ring-[3px] focus-visible:ring-ring/50 md:text-sm"}),e[63]=s.published_at,e[64]=k,e[65]=S):S=e[65];let C;e[66]!==r.published_at?(C=t.jsx(d,{message:r.published_at}),e[66]=r.published_at,e[67]=C):C=e[67];let U;e[68]!==S||e[69]!==C?(U=t.jsxs("div",{className:"space-y-2",children:[ke,S,C]}),e[68]=S,e[69]=C,e[70]=U):U=e[70];let L;e[71]!==w||e[72]!==U?(L=t.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[w,U]}),e[71]=w,e[72]=U,e[73]=L):L=e[73];let Se;e[74]===Symbol.for("react.memo_cache_sentinel")?(Se=t.jsx(p,{htmlFor:"link_url",children:"Project Website/Link (optional)"}),e[74]=Se):Se=e[74];let R;e[75]!==i?(R=l=>i("link_url",l.target.value),e[75]=i,e[76]=R):R=e[76];let F;e[77]!==s.link_url||e[78]!==R?(F=t.jsx("input",{id:"link_url",type:"url",value:s.link_url,onChange:R,className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-xs outline-none focus-visible:ring-[3px] focus-visible:ring-ring/50 md:text-sm",placeholder:"https://..."}),e[77]=s.link_url,e[78]=R,e[79]=F):F=e[79];let M;e[80]!==r.link_url?(M=t.jsx(d,{message:r.link_url}),e[80]=r.link_url,e[81]=M):M=e[81];let P;e[82]!==F||e[83]!==M?(P=t.jsxs("div",{className:"space-y-2",children:[Se,F,M]}),e[82]=F,e[83]=M,e[84]=P):P=e[84];let Ce;e[85]===Symbol.for("react.memo_cache_sentinel")?(Ce=t.jsx(p,{htmlFor:"image",children:"Main Image (optional)"}),e[85]=Ce):Ce=e[85];let E;e[86]!==i?(E=t.jsx("input",{id:"image",type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:l=>i("image",l.target.files?.[0]??null),className:"w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-xs outline-none file:mr-2 file:rounded-md file:border-0 file:bg-muted file:px-3 file:py-1 file:text-sm file:font-medium focus-visible:ring-[3px] focus-visible:ring-ring/50 md:text-sm"}),e[86]=i,e[87]=E):E=e[87];let Ue;e[88]===Symbol.for("react.memo_cache_sentinel")?(Ue=t.jsx("p",{className:"text-xs text-muted-foreground",children:"JPEG, PNG, GIF or WebP. Max 5 MB."}),e[88]=Ue):Ue=e[88];let $;e[89]!==le||e[90]!==s.image||e[91]!==s.remove_image||e[92]!==a||e[93]!==m||e[94]!==i?($=(le||m)&&t.jsxs("div",{className:"flex flex-wrap items-start gap-3 pt-1",children:[t.jsx("img",{src:m??le??"",alt:"",className:"h-24 w-auto rounded-md border border-slate-200 object-cover"}),a&&le&&!s.image&&t.jsxs("label",{className:"flex cursor-pointer items-center gap-2 text-sm text-muted-foreground",children:[t.jsx("input",{type:"checkbox",checked:s.remove_image,onChange:l=>i("remove_image",l.target.checked),className:"rounded border-slate-300"}),"Remove picture"]})]}),e[89]=le,e[90]=s.image,e[91]=s.remove_image,e[92]=a,e[93]=m,e[94]=i,e[95]=$):$=e[95];let I;e[96]!==r.image?(I=t.jsx(d,{message:r.image}),e[96]=r.image,e[97]=I):I=e[97];let O;e[98]!==E||e[99]!==$||e[100]!==I?(O=t.jsxs("div",{className:"space-y-2",children:[Ce,E,Ue,$,I]}),e[98]=E,e[99]=$,e[100]=I,e[101]=O):O=e[101];let Le;e[102]===Symbol.for("react.memo_cache_sentinel")?(Le=t.jsx(p,{htmlFor:"video",children:"Project Video (optional)"}),e[102]=Le):Le=e[102];let T;e[103]!==i?(T=t.jsx("input",{id:"video",type:"file",accept:"video/mp4,video/quicktime",onChange:l=>i("video",l.target.files?.[0]??null),className:"w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-xs outline-none file:mr-2 file:rounded-md file:border-0 file:bg-muted file:px-3 file:py-1 file:text-sm file:font-medium focus-visible:ring-[3px] focus-visible:ring-ring/50 md:text-sm"}),e[103]=i,e[104]=T):T=e[104];let Re;e[105]===Symbol.for("react.memo_cache_sentinel")?(Re=t.jsx("p",{className:"text-xs text-muted-foreground",children:"MP4 or MOV. Max 40 MB."}),e[105]=Re):Re=e[105];let D;e[106]!==re||e[107]!==s.remove_video||e[108]!==s.video||e[109]!==a||e[110]!==c||e[111]!==i?(D=(re||c)&&t.jsxs("div",{className:"space-y-2 pt-1",children:[t.jsx("video",{src:c??re??"",controls:!0,className:"h-40 w-auto rounded-md border border-slate-200"}),a&&re&&!s.video&&t.jsxs("label",{className:"flex cursor-pointer items-center gap-2 text-sm text-muted-foreground",children:[t.jsx("input",{type:"checkbox",checked:s.remove_video,onChange:l=>i("remove_video",l.target.checked),className:"rounded border-slate-300"}),"Remove video"]})]}),e[106]=re,e[107]=s.remove_video,e[108]=s.video,e[109]=a,e[110]=c,e[111]=i,e[112]=D):D=e[112];let A;e[113]!==r.video?(A=t.jsx(d,{message:r.video}),e[113]=r.video,e[114]=A):A=e[114];let B;e[115]!==T||e[116]!==D||e[117]!==A?(B=t.jsxs("div",{className:"space-y-2",children:[Le,T,Re,D,A]}),e[115]=T,e[116]=D,e[117]=A,e[118]=B):B=e[118];let Fe;e[119]===Symbol.for("react.memo_cache_sentinel")?(Fe=t.jsx(p,{htmlFor:"other_images",children:"Additional Images (optional)"}),e[119]=Fe):Fe=e[119];let q;e[120]!==s.other_images||e[121]!==i?(q=t.jsx("input",{id:"other_images",type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",multiple:!0,onChange:l=>{const n=l.target.files;n&&i("other_images",[...s.other_images,...Array.from(n)]),l.target.value=""},className:"w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-xs outline-none file:mr-2 file:rounded-md file:border-0 file:bg-muted file:px-3 file:py-1 file:text-sm file:font-medium focus-visible:ring-[3px] focus-visible:ring-ring/50 md:text-sm"}),e[120]=s.other_images,e[121]=i,e[122]=q):q=e[122];let Me;e[123]===Symbol.for("react.memo_cache_sentinel")?(Me=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Select multiple images. Max 10 images, 5 MB each."}),e[123]=Me):Me=e[123];let V;e[124]!==s.remove_other_images||e[125]!==o||e[126]!==i?(V=o?.other_images_urls&&o.other_images_urls.length>0&&t.jsxs("div",{className:"space-y-2 pt-1",children:[t.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Existing images:"}),t.jsx("div",{className:"flex flex-wrap gap-3",children:o.other_images_urls.map((l,n)=>{const oe=s.remove_other_images.includes(n);return t.jsxs("div",{className:"group relative",children:[t.jsx("img",{src:l,alt:"",className:`h-20 w-20 rounded-md border border-slate-200 object-cover transition-opacity ${oe?"opacity-40":""}`}),t.jsx("button",{type:"button",onClick:()=>{oe?i("remove_other_images",s.remove_other_images.filter(Qe=>Qe!==n)):i("remove_other_images",[...s.remove_other_images,n])},className:`absolute -top-1.5 -right-1.5 flex h-5 w-5 items-center justify-center rounded-full text-xs font-bold shadow-sm transition-colors ${oe?"bg-green-500 text-white hover:bg-green-600":"bg-red-500 text-white hover:bg-red-600"}`,children:oe?"↺":"×"})]},l)})})]}),e[124]=s.remove_other_images,e[125]=o,e[126]=i,e[127]=V):V=e[127];let G;e[128]!==s.other_images||e[129]!==i?(G=s.other_images.length>0&&t.jsxs("div",{className:"space-y-2 pt-1",children:[t.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"New images to upload:"}),t.jsx("div",{className:"flex flex-wrap gap-3",children:s.other_images.map((l,n)=>t.jsxs("div",{className:"group relative",children:[t.jsx("img",{src:URL.createObjectURL(l),alt:"",className:"h-20 w-20 rounded-md border border-slate-200 object-cover"}),t.jsx("button",{type:"button",onClick:()=>{i("other_images",s.other_images.filter((oe,Qe)=>Qe!==n))},className:"absolute -top-1.5 -right-1.5 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white shadow-sm hover:bg-red-600",children:"×"})]},`${l.name}-${n}`))})]}),e[128]=s.other_images,e[129]=i,e[130]=G):G=e[130];let H;e[131]!==r.other_images?(H=t.jsx(d,{message:r.other_images}),e[131]=r.other_images,e[132]=H):H=e[132];let W;e[133]!==q||e[134]!==V||e[135]!==G||e[136]!==H?(W=t.jsxs("div",{className:"space-y-2",children:[Fe,q,Me,V,G,H]}),e[133]=q,e[134]=V,e[135]=G,e[136]=H,e[137]=W):W=e[137];let Pe;e[138]===Symbol.for("react.memo_cache_sentinel")?(Pe=t.jsx(p,{htmlFor:"description",children:"Description"}),e[138]=Pe):Pe=e[138];let z;e[139]!==i?(z=l=>i("description",l.target.value),e[139]=i,e[140]=z):z=e[140];let J;e[141]!==s.description||e[142]!==z?(J=t.jsx("textarea",{id:"description",value:s.description,onChange:z,className:pt,placeholder:"Write details about the project...",required:!0}),e[141]=s.description,e[142]=z,e[143]=J):J=e[143];let K;e[144]!==r.description?(K=t.jsx(d,{message:r.description}),e[144]=r.description,e[145]=K):K=e[145];let Q;e[146]!==J||e[147]!==K?(Q=t.jsxs("div",{className:"space-y-2",children:[Pe,J,K]}),e[146]=J,e[147]=K,e[148]=Q):Q=e[148];let X;e[149]!==_||e[150]!==L||e[151]!==P||e[152]!==O||e[153]!==B||e[154]!==W||e[155]!==Q?(X=t.jsxs(at,{children:[_e,t.jsxs(nt,{className:"space-y-4",children:[_,L,P,O,B,W,Q]})]}),e[149]=_,e[150]=L,e[151]=P,e[152]=O,e[153]=B,e[154]=W,e[155]=Q,e[156]=X):X=e[156];const Ke=fe?"Saving...":a?"Save changes":"Publish project";let Y;e[157]!==fe||e[158]!==Ke?(Y=t.jsx(Ze,{type:"submit",disabled:fe,children:Ke}),e[157]=fe,e[158]=Ke,e[159]=Y):Y=e[159];let Ee;e[160]===Symbol.for("react.memo_cache_sentinel")?(Ee=t.jsx(Ze,{type:"button",variant:"outline",asChild:!0,children:t.jsx(lt,{href:ie,children:"Cancel"})}),e[160]=Ee):Ee=e[160];let Z;e[161]!==Y?(Z=t.jsxs("div",{className:"flex flex-wrap gap-3",children:[Y,Ee]}),e[161]=Y,e[162]=Z):Z=e[162];let ee;e[163]!==He||e[164]!==X||e[165]!==Z?(ee=t.jsxs("form",{onSubmit:He,className:"space-y-6",children:[X,Z]}),e[163]=He,e[164]=X,e[165]=Z,e[166]=ee):ee=e[166];let te;e[167]!==x||e[168]!==ee?(te=t.jsxs("div",{className:"flex flex-1 flex-col gap-6 overflow-x-auto px-4 py-6 md:px-6 lg:max-w-2xl",children:[x,ee]}),e[167]=x,e[168]=ee,e[169]=te):te=e[169];let se;e[170]!==Ge?(se=t.jsx(mt,{open:Ge,onOpenChange:Xe,title:"Saved"}),e[170]=Ge,e[171]=se):se=e[171];let $e;return e[172]!==Te||e[173]!==u||e[174]!==te||e[175]!==se?($e=t.jsxs(ct,{breadcrumbs:Te,children:[u,te,se]}),e[172]=Te,e[173]=u,e[174]=te,e[175]=se,e[176]=$e):$e=e[176],$e}export{Et as default};
