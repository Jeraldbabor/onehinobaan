import{c as C,r as N,j as e,L as f,b as A,H as v}from"./app-BIIX7BF1.js";import{B as x}from"./index-CZhuW6J2.js";import{b as g,c as b,C as z,a as S,d as T}from"./card-B7J3uYGi.js";import{T as D}from"./toast-CeNHnvtf.js";import{A as k}from"./app-layout-CPMJcZkt.js";import{M as L}from"./megaphone-Bvy9s0wX.js";import{P as w}from"./plus-BrWJt3Uv.js";import{E as $}from"./external-link-BlWmAA9R.js";import{P as E}from"./pencil-BPgp3n-a.js";import{T as P}from"./trash-2-DOEAR1og.js";/* empty css            */import"./check-CRkoq3Li.js";import"./createLucideIcon-rY7UP4mI.js";import"./x-D52Q4CUL.js";import"./transition-BBAuz0nm.js";import"./index-CTYiB3h6.js";import"./index-pjzQDydk.js";import"./hard-hat-Bvnd2bTD.js";import"./briefcase-Bu0tNWqC.js";import"./users-DgcjHilf.js";import"./landmark-CsYJgGDc.js";const I="/dashboard",r="/dashboard/announcements",R=[{title:"Dashboard",href:I},{title:"News & Announcements",href:r}],H={news:"News",update:"Update",announcement:"Announcement"};function le(y){const s=C.c(12),{announcements:l}=y,[p,u]=N.useState(!1),[h,j]=N.useState(null);let i;s[0]===Symbol.for("react.memo_cache_sentinel")?(i=t=>{confirm("Remove this item? It will no longer appear on the site.")&&(j(t),A.delete(`${r}/${t}`,{onSuccess:()=>u(!0),onFinish:()=>j(null)}))},s[0]=i):i=s[0];const _=i;let o;s[1]===Symbol.for("react.memo_cache_sentinel")?(o=e.jsx(v,{title:"News & Announcements"}),s[1]=o):o=s[1];let c;s[2]===Symbol.for("react.memo_cache_sentinel")?(c=e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold tracking-tight md:text-2xl",children:"News & Announcements"}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Post news, updates, and announcements. They appear in the right sidebar on About and Tourism pages."})]}),s[2]=c):c=s[2];let m;s[3]===Symbol.for("react.memo_cache_sentinel")?(m=e.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-4",children:[c,e.jsx(x,{asChild:!0,children:e.jsxs(f,{href:`${r}/create`,children:[e.jsx(w,{className:"size-4"}),"Add post"]})})]}),s[3]=m):m=s[3];let n;s[4]!==l||s[5]!==h?(n=e.jsxs("div",{className:"flex flex-1 flex-col gap-6 overflow-x-auto px-4 py-6 md:px-6 lg:max-w-4xl",children:[m,l.length===0?e.jsx(g,{children:e.jsxs(b,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(L,{className:"size-12 text-muted-foreground"}),e.jsx("p",{className:"mt-4 text-sm text-muted-foreground",children:"No posts yet. Add one to show on the public site."}),e.jsx(x,{asChild:!0,className:"mt-4",children:e.jsxs(f,{href:`${r}/create`,children:[e.jsx(w,{className:"size-4"}),"Add post"]})})]})}):e.jsx("ul",{className:"space-y-3",children:l.map(t=>e.jsx("li",{children:e.jsxs(g,{children:[e.jsxs(z,{className:"flex flex-row items-start justify-between gap-4 py-4",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(S,{className:"text-base",children:t.title}),e.jsxs(T,{className:"mt-1 flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"capitalize",children:H[t.type]??t.type}),e.jsx("span",{children:"·"}),e.jsx("span",{children:t.published_at?new Date(t.published_at).toLocaleDateString():"Draft"}),t.link_url&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"·"}),e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx($,{className:"size-3"}),"Link"]})]})]})]}),e.jsxs("div",{className:"flex shrink-0 gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(f,{href:`${r}/${t.id}/edit`,children:[e.jsx(E,{className:"size-3.5"}),"Edit"]})}),e.jsxs(x,{variant:"destructive",size:"sm",onClick:()=>_(t.id),disabled:h===t.id,children:[e.jsx(P,{className:"size-3.5"}),"Remove"]})]})]}),t.content&&e.jsx(b,{className:"border-t py-3",children:e.jsx("p",{className:"line-clamp-2 text-sm text-muted-foreground",children:t.content.replace(/<[^>]*>/g," ").trim()})})]})},t.id))})]}),s[4]=l,s[5]=h,s[6]=n):n=s[6];let a;s[7]!==p?(a=e.jsx(D,{open:p,onOpenChange:u,title:"Done"}),s[7]=p,s[8]=a):a=s[8];let d;return s[9]!==n||s[10]!==a?(d=e.jsxs(k,{breadcrumbs:R,children:[o,n,a]}),s[9]=n,s[10]=a,s[11]=d):d=s[11],d}export{le as default};
