import{c as v,r as g,j as e,L as f,b as C,H as P}from"./app-BIIX7BF1.js";import{B as x}from"./index-CZhuW6J2.js";import{b,c as N,C as S,a as D,d as T}from"./card-B7J3uYGi.js";import{T as $}from"./toast-CeNHnvtf.js";import{A as k}from"./app-layout-CPMJcZkt.js";import{H as z}from"./hard-hat-Bvnd2bTD.js";import{P as y}from"./plus-BrWJt3Uv.js";import{P as H}from"./pencil-BPgp3n-a.js";import{T as A}from"./trash-2-DOEAR1og.js";/* empty css            */import"./check-CRkoq3Li.js";import"./createLucideIcon-rY7UP4mI.js";import"./x-D52Q4CUL.js";import"./transition-BBAuz0nm.js";import"./index-CTYiB3h6.js";import"./index-pjzQDydk.js";import"./megaphone-Bvy9s0wX.js";import"./briefcase-Bu0tNWqC.js";import"./users-DgcjHilf.js";import"./landmark-CsYJgGDc.js";const E="/dashboard",l="/dashboard/projects",I=[{title:"Dashboard",href:E},{title:"Municipal Projects",href:l}];function re(w){const s=v.c(12),{projects:i}=w,[p,j]=g.useState(!1),[h,u]=g.useState(null);let o;s[0]===Symbol.for("react.memo_cache_sentinel")?(o=t=>{confirm("Remove this project? It will no longer appear on the site.")&&(u(t),C.delete(`${l}/${t}`,{onSuccess:()=>j(!0),onFinish:()=>u(null)}))},s[0]=o):o=s[0];const _=o;let n;s[1]===Symbol.for("react.memo_cache_sentinel")?(n=e.jsx(P,{title:"Municipal Projects"}),s[1]=n):n=s[1];let c;s[2]===Symbol.for("react.memo_cache_sentinel")?(c=e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold tracking-tight md:text-2xl",children:"Municipal Projects"}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Manage infrastructure and development projects. They appear on the homepage."})]}),s[2]=c):c=s[2];let d;s[3]===Symbol.for("react.memo_cache_sentinel")?(d=e.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-4",children:[c,e.jsx(x,{asChild:!0,children:e.jsxs(f,{href:`${l}/create`,children:[e.jsx(y,{className:"size-4"}),"Add project"]})})]}),s[3]=d):d=s[3];let r;s[4]!==h||s[5]!==i?(r=e.jsxs("div",{className:"flex flex-1 flex-col gap-6 overflow-x-auto px-4 py-6 md:px-6 lg:max-w-4xl",children:[d,i.length===0?e.jsx(b,{children:e.jsxs(N,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(z,{className:"size-12 text-muted-foreground"}),e.jsx("p",{className:"mt-4 text-sm text-muted-foreground",children:"No projects yet. Add one to show on the homepage."}),e.jsx(x,{asChild:!0,className:"mt-4",children:e.jsxs(f,{href:`${l}/create`,children:[e.jsx(y,{className:"size-4"}),"Add project"]})})]})}):e.jsx("ul",{className:"space-y-3",children:i.map(t=>e.jsx("li",{children:e.jsxs(b,{children:[e.jsxs(S,{className:"flex flex-row items-start justify-between gap-4 py-4",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(D,{className:"text-base",children:t.title}),e.jsx("span",{className:`rounded-full px-2 py-0.5 text-[10px] font-bold tracking-wider uppercase ${t.status==="completed"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:t.status})]}),e.jsxs(T,{className:"mt-1 flex flex-wrap items-center gap-2",children:[e.jsx("span",{children:t.published_at?new Date(t.published_at).toLocaleDateString():"Draft"}),t.link_url&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Â·"}),e.jsx("span",{children:"Has link"})]})]})]}),e.jsxs("div",{className:"flex shrink-0 gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(f,{href:`${l}/${t.id}/edit`,children:[e.jsx(H,{className:"size-3.5"}),"Edit"]})}),e.jsxs(x,{variant:"destructive",size:"sm",onClick:()=>_(t.id),disabled:h===t.id,children:[e.jsx(A,{className:"size-3.5"}),"Remove"]})]})]}),t.description&&e.jsx(N,{className:"border-t py-3",children:e.jsx("p",{className:"line-clamp-2 text-sm text-muted-foreground",children:t.description.replace(/<[^>]*>/g," ").trim()})})]})},t.id))})]}),s[4]=h,s[5]=i,s[6]=r):r=s[6];let a;s[7]!==p?(a=e.jsx($,{open:p,onOpenChange:j,title:"Done"}),s[7]=p,s[8]=a):a=s[8];let m;return s[9]!==r||s[10]!==a?(m=e.jsxs(k,{breadcrumbs:I,children:[n,r,a]}),s[9]=r,s[10]=a,s[11]=m):m=s[11],m}export{re as default};
